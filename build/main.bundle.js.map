{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/node-libs-browser/node_modules/events/events.js","webpack:///./src/LandMap.js","webpack:///./src/MapView.js","webpack:///./src/TestRandomDataProvider2.js","webpack:///./src/domUtils.js","webpack:///./src/main.js","webpack:///./src/utils.js"],"names":["EventEmitter","_events","_maxListeners","undefined","module","exports","prototype","defaultMaxListeners","setMaxListeners","n","isNumber","isNaN","TypeError","emit","type","er","handler","len","args","i","listeners","error","isObject","length","arguments","Error","err","context","isUndefined","isFunction","call","Array","slice","apply","addListener","listener","m","newListener","push","warned","console","trace","on","once","fired","g","removeListener","list","position","splice","removeAllListeners","key","ret","listenerCount","evlistener","emitter","arg","defaultOpts","parcelLength","offset","Point","REF_MAP","A","lat","lon","B","C","D","E","F","G","H","I","LandMap","opts","parcelMap","x","y","add","recalculatePosition","from","to","nextLat","Math","floor","nextLon","newParcelMap","centerParcel","prevStart","Object","keys","forEach","id","newStart","newArea","getArea","domUtils","KEYBOARD_STEP","containerElement","itemRenderer","dataProvider","css","injectCSS","MapView","assign","container","document","querySelector","map","initDOM","attachEvents","initialArea","monitorArea","contentContainer","createContentContainer","createElement","classList","appendChild","monitorMapOffset","connectToDataProvider","addKeyboardEvents","addMouseEvents","log","updateElementPositions","startPoint","endPoint","elems","querySelectorAll","elem","pos","getItemPosition","Number","dataset","style","transform","item","itemElem","createItemElement","innerText","text","addEventListener","ev","allowed","indexOf","move","TestDataProvider","random","styleElem","setAttribute","textContent","TestRandomDataProvider"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.js\");\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","/*\n  Componente LandMap encargado de mostrar las parcelas \n  y la navegación entre ellas\n\n  Las parcelas se representan en un objeto así:\n  ABC\n  DEF\n  GHI\n\n  Cuando hay movimientos se calcula lat,lon para cada\n  una de las posiciones del objeto.\n\n*/\n\nimport EventEmitter from 'events'\nimport {Point} from './utils'\n\n\nconst defaultOpts = {\n\tparcelLength: 200,\n\toffset: new Point(0,0)\n}\n\n//relations between parcels (useful to recalculate)\nconst REF_MAP ={\n\t\t\tA:{lat:-1, lon:-1},\n\t\t\tB:{lat: 0, lon:-1},\n\t\t\tC:{lat: 1, lon:-1},\n\t\t\tD:{lat:-1, lon: 0},\n\t\t\tE:{lat: 0 ,lon: 0},\n\t\t\tF:{lat: 1, lon: 0},\n\t\t\tG:{lat:-1, lon: 1},\n\t\t\tH:{lat: 0, lon: 1},\n\t\t\tI:{lat: 1, lon: 1}\n\t\t}\n\nclass LandMap extends EventEmitter {\n\n\tconstructor(opts = defaultOpts) {\n\t\tsuper();\n\t\tthis.parcelLength = opts.parcelLength;\n\t\t//Active parcels\n\t\tthis.parcelMap = {\n\t\t\tA:{lat:-1, lon:-1},\n\t\t\tB:{lat: 0, lon:-1},\n\t\t\tC:{lat: 1, lon:-1},\n\t\t\tD:{lat:-1, lon: 0},\n\t\t\tE:{lat: 0 ,lon: 0},\n\t\t\tF:{lat: 1, lon: 0},\n\t\t\tG:{lat:-1, lon: 1},\n\t\t\tH:{lat: 0, lon: 1},\n\t\t\tI:{lat: 1, lon: 1},\n\t\t}\n\t\tthis.offset = opts.offset\n\t}\n\n\tgetActiveParcels() {\n\t\treturn this.parcelMap;\n\t}\n\n\tmove({x=0,y=0}) {\n\t\tthis.offset = this.offset.add({x,y})\n\t\tthis.emit('offsetchanged', this.offset);\n\t\tthis.recalculatePosition(this.offset);\n\t}\n\n\t//Returns 2 points (top,left) and (bottom,right)\n\t//encompassing the total area (the 9 parcels)\n\tgetArea() {\n\t\tconst from = {\n\t\t\tx: this.parcelMap['A'].lat,\n\t\t\ty: this.parcelMap['A'].lon,\n\t\t}\n\n\t\tconst to = {\n\t\t\tx: this.parcelMap['I'].lat + 1,\n\t\t\ty: this.parcelMap['I'].lon + 1,\n\t\t}\n\t\treturn [new Point(from.x, from.y), new Point(to.x, to.y)]\n\t}\n\n\trecalculatePosition(offset) {\n\n\t\tconst nextLat = Math.floor(offset.x / (this.parcelLength - 1));\n\t\tconst nextLon = Math.floor(offset.y / (this.parcelLength - 1));\n\t\t//calculate the new map\n\t\tconst newParcelMap = {}\n\t\t//Use the reference map to calculate the lat, lon\n\t\t//based on the value of E (the center parcel)\n\t\tconst centerParcel = {\n\t\t\tlat:nextLat,\n\t\t\tlon:nextLon\n\t\t}\n\n\t\t//save the previous values of 'A' to detect if\n\t\t//the map changed\n\t\tconst prevStart = {...this.parcelMap['A']}\n\n\t\tObject.keys(this.parcelMap).forEach((id)=>{\n\t\t\tnewParcelMap[id] =  {\n\t\t\t\tlat: centerParcel.lat + REF_MAP[id].lat,\n\t\t\t\tlon: centerParcel.lon + REF_MAP[id].lon,\n\t\t\t}\n\t\t})\n\n\t\tconst newStart = {...newParcelMap['A']}\n\t\tif(prevStart.lat != newStart.lat || prevStart.lon != newStart.lon) {\n\t\t\t//the start parcel 'A' changed, so all the map changed\n\t\t\tthis.parcelMap = newParcelMap;\n\t\t\t//the area to monitor changed\n\t\t\tlet newArea = this.getArea()\n\t\t\tthis.emit('areachanged', newArea[0], newArea[1] );\n\t\t}\n\n\n\t}\n\n\n}\n\nexport {REF_MAP};\nexport default LandMap;","import LandMap,{REF_MAP} from './LandMap'\nimport * as domUtils from './domUtils'\nimport {Point} from './utils'\n\n/**\n La clase mapview se encarga de manipular el DOM para\n mostrar las parcelas\n**/\n\n//TODO: format, change tabs to spaces\n\n\n//pixels moved when arrows are pressed\nconst KEYBOARD_STEP  = 100;\nconst defaultOpts = {\n\tcontainerElement: 'body',\n\titemRenderer: null,\n\tparcelLength: 200,\n\tdataProvider: null\n}\n\n//TODO: add base css here\n\nconst css = `\n\n\t.content-container {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\toverflow: hidden;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.item {\n\t    position: absolute;\n\t    top: 0;\n\t    left: 0;\n\t    transition: transform 1s;\n\t}\n`\n\ndomUtils.injectCSS(css);\n\nexport default class MapView {\n\n\tconstructor(opts) {\n\t\topts = Object.assign({}, defaultOpts,  opts);\n\t\tthis.opts = opts; \n\t\tthis.offset = opts.offset || new Point(0,0)\n\t\tthis.dataProvider = opts.dataProvider;\n\t\tthis.container = typeof opts.containerElement === 'string' ? \n\t\t\tdocument.querySelector(opts.containerElement) :\n\t\t\topts.containerElement\n\n\t\tthis.map = new LandMap({\n\t\t\tparcelLength: opts.parcelLength,\n\t\t\toffset: this.offset\n\t\t})\n\t\tthis.initDOM()\n\t\tthis.attachEvents()\n\t\t//Start monitoring the initial map areachanged\n\t\tvar initialArea = this.map.getArea();\n\t\tthis.dataProvider.monitorArea(initialArea[0], initialArea[1])\n\n\t}\n\n\tinitDOM() {\n\t\t//Create contentContainer\n\t\tthis.contentContainer = this.createContentContainer();\n\n\t}\n\n\tcreateContentContainer() {\n\t\tvar contentContainer = document.createElement('div');\n\t\tcontentContainer.classList.add('content-container');\n\t\tthis.container.appendChild(contentContainer);\n\t\treturn contentContainer\n\t}\n\n\n\n\tattachEvents() {\n\t\tthis.monitorMapOffset();\n\t\tthis.connectToDataProvider();\n\t\tthis.addKeyboardEvents();\n\t\tthis.addMouseEvents()\n\t}\n\n\tmonitorMapOffset() {\n\n\t\tthis.map.on('offsetchanged', (offset)=>{\n\t\t\tconsole.log('offset changed', offset);\n\t\t\t//map was moved\n\t\t\tthis.offset = offset;\n\t\t\t//update transform attribute so they move\n\t\t\tthis.updateElementPositions(offset);\n\t\t})\n\n\t\t//when the area to monitor changes\n\t\t//receives the newArea [P1,P2] where\n\t\t//P1 is the top left point (lat,lon)\n\t\t//and P2 is the bottom right point\n\t\tthis.map.on('areachanged', (startPoint, endPoint)=>{\n\t\t\t//When current parcel changes (and their surroundings)\n\t\t\t//TODO: call monitorarea (dataprovider)\n\t\t\tconsole.log('parcel map changed')\n\t\t\tthis.dataProvider.monitorArea(startPoint, endPoint)\n\t\t})\n\t}\n\n\tupdateElementPositions(offset) {\n\t\t//upate dom elements transform attribute\n\t\tvar elems = Array.from(this.contentContainer.querySelectorAll('.item'))\n\t\telems.forEach((elem)=>{\n\t\t\tlet pos = this.getItemPosition(Number(elem.dataset.lat), Number(elem.dataset.lon), offset);\n\t\t\telem.style.transform = `translate(${pos.x}px,${pos.y}px)`\n\n\t\t})\n\t}\n\n\tconnectToDataProvider() {\n\t\tthis.dataProvider.on('item', (item)=>{\n\t\t\tconsole.log('item received,', item)\n\t\t\tlet itemElem = this.createItemElement(item);\n\t\t\titemElem.classList.add('item')\n\t\t\titemElem.dataset.lat = item.lat\n\t\t\titemElem.dataset.lon = item.lon\n\n\t\t\t//todo: add to a itemcontainr layer\n\t\t\tthis.contentContainer.appendChild(itemElem);\n\t\t\t//set position\n\t\t\tlet pos = this.getItemPosition(item.lat, item.lon, this.offset);\n\t\t\tconsole.log('item pos', pos)\n\t\t\titemElem.style.transform = `translate(${pos.x}px,${pos.y}px)`\n\n\t\t})\n\t}\n\n\tgetItemPosition(lat, lon, offset) {\n\t\t//calculate item the pixel position\n \t\t//TODO: don't access parcelMap directly\n\n\t\treturn {\n\t\t\tx: lat * this.opts.parcelLength + offset.x,\n\t\t\ty: lon * this.opts.parcelLength + offset.y\n\t\t}\n\t}\n\n\tcreateItemElement(item) {\n\t\t//todo delegate this to item renderer\n\t\tvar elem = document.createElement('div')\n\t\telem.innerText = item.text;\n\t\treturn elem;\n\t}\n\n\taddKeyboardEvents() {\n\t\tdocument.addEventListener('keyup', (ev)=>{\n\t\t\tconst allowed = ['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown']\n\t\t\tif(allowed.indexOf(ev.key) >= 0 ) {\n\t\t\t\t\tswitch(ev.key) {\n\t\t\t\t\tcase \"ArrowDown\":\n\t\t\t\t\t\tthis.map.move({y:KEYBOARD_STEP});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"ArrowLeft\":\n\t\t\t\t\t\tthis.map.move({x:-KEYBOARD_STEP});\n\t\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"ArrowRight\":\n\t\t\t\t\t\tthis.map.move({x:KEYBOARD_STEP});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"ArrowUp\":\n\t\t\t\t\t\tthis.map.move({y:-KEYBOARD_STEP});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\t\n\t\t\t}\n\t\t})\n\t}\n\n\taddMouseEvents() {\n\n\t}\n\n}\n\n","import EventEmitter from 'events'\n\nclass TestDataProvider extends EventEmitter {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tmonitorArea(from, to) {\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\tlet lat = Math.random()*to.x - from.x\n\t\t\tlet lon = Math.random()*to.y - from.y\n\t\t\tthis.emit('item', {\n\t\t\t\tid:Math.random()*100,\n\t\t\t\ttext:'Some text' + Math.random()*2000,\n\t\t\t\tlat,\n\t\t\t\tlon,\n\t\t\t})\n\t\t}\n\t}\n}\nexport default TestDataProvider","export function injectCSS(css) {\n\tconst styleElem = document.createElement('style')\n\tstyleElem.setAttribute('type', 'text/css')\n\tstyleElem.textContent = css\n    document.querySelector('head').appendChild(styleElem)\n}\n","import MapView from './MapView';\nimport TestRandomDataProvider from './TestRandomDataProvider2';\n\n\n//this should render the parcels\nnew MapView({\n\tdataProvider: new TestRandomDataProvider(),\n\tparcelLength: 400\n})","//immutable point structure\nexport class Point {\n\n\tconstructor(x=0, y=0) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\tadd({x,y}) {\n\t\treturn new Point(this.x+x, this.y+y)\n\t}\n}"],"sourceRoot":""}