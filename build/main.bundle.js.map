{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/node-libs-browser/node_modules/events/events.js","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/DatDataProvider.js","webpack:///./src/LandMap.js","webpack:///./src/MapView.js","webpack:///./src/NoteRenderer.js","webpack:///./src/TestRandomDataProvider2.js","webpack:///./src/domUtils.js","webpack:///./src/main.js","webpack:///./src/utils.js"],"names":["EventEmitter","_events","_maxListeners","undefined","module","exports","prototype","defaultMaxListeners","setMaxListeners","n","isNumber","isNaN","TypeError","emit","type","er","handler","len","args","i","listeners","error","isObject","length","arguments","Error","err","context","isUndefined","isFunction","call","Array","slice","apply","addListener","listener","m","newListener","push","warned","console","trace","on","once","fired","g","removeListener","list","position","splice","removeAllListeners","key","ret","listenerCount","evlistener","emitter","arg","global","Op","Object","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","inModule","runtime","regeneratorRuntime","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","Context","_invoke","makeInvokeMethod","tryCatch","fn","obj","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","constructor","displayName","defineIteratorMethods","forEach","method","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","invoke","resolve","reject","record","result","value","Promise","then","unwrapped","previousPromise","enqueue","callInvokeWithMethodAndArg","async","iter","next","done","state","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","return","info","resultName","nextLoc","toString","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","keys","object","reverse","pop","iterable","iteratorMethod","skipTempReset","prev","charAt","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","Function","webpackPolyfill","deprecate","paths","children","defineProperty","enumerable","get","l","DatDataProvider","index","initData","initDat","bind","addNoteToIndex","addNote","updateNote","monitorArea","url","window","location","DatArchive","archive","title","description","catch","log","mkdir","stat","stats","writeFile","readFile","indexContents","JSON","parse","note","lat","lon","id","stringify","item","from","to","indexNote","x","y","content","defaultOpts","parcelLength","offset","Point","REF_MAP","A","B","C","D","E","F","G","H","I","LandMap","opts","parcelMap","add","recalculatePosition","nextLat","Math","floor","nextLon","newParcelMap","centerParcel","prevStart","newStart","newArea","getArea","domUtils","KEYBOARD_STEP","containerElement","itemRenderer","noteRenderer","dataProvider","css","injectCSS","MapView","assign","container","document","querySelector","map","initDOM","attachEvents","initialArea","contentContainer","createContentContainer","createElement","classList","appendChild","monitorMapOffset","connectToDataProvider","addKeyboardEvents","addMouseEvents","updateElementPositions","startPoint","endPoint","elems","querySelectorAll","elem","pos","getItemPosition","Number","dataset","style","transform","itemElem","createItemElement","innerHTML","addEventListener","ev","allowed","indexOf","move","text","TestDataProvider","j","random","styleElem","setAttribute","textContent","provider","TestRandomDataProvider"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() { return this })() || Function(\"return this\")()\n);\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import EventEmitter from 'events'\n\n/**\n Saves notes to dat. Each note will be a json file.\n Also, updates the file index.json that has all the notes\n positions\n TODO: clean, are the beaker apis being used correctly?\n**/\nclass DatDataProvider extends EventEmitter {\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.index = [];\n\t\tthis.initData = this.initDat.bind(this);\n\t\tthis.addNoteToIndex = this.addNoteToIndex.bind(this);\n\t\tthis.addNote = this.addNote.bind(this);\n\t\tthis.updateNote = this.updateNote.bind(this);\n\t\tthis.monitorArea = this.monitorArea.bind(this);\n\t\tthis.initDat();\n\t}\n\n\tasync initDat() {\n\n\t\tvar url = window.location.toString();\n\n\t\t//Get current archive\n\t\tthis.archive = await new DatArchive(url)\n\t\tif(!this.archive) {\n\n\t\t\tthis.archive = await  DatArchive.create({\n\t\t\t\ttitle:'Notica Workspace',\n\t\t\t\tdescription:'Store Notica notes here',\n\t\t\t}).catch(()=>{\n\t\t\t\tconsole.log('Error creating archive')\n\t\t\t})\n\t\t}\n\t\t\n\t\tawait this.archive.mkdir('/items').catch(err=>{\n\t\t\tconsole.log('items folder already exist')\n\t\t})\n\n\t\t//init index file (index will store ids and location)\n\n\t\tvar stats = await this.archive.stat('/items-index.json').catch(err=>{\n\t\t\tconsole.log(\"items-index.json doesn't exist\")\n\t\t})\n\n\t\tif(!stats) {\n\t\t   console.log('creating intems-index.json')\n\t\t   await this.archive.writeFile('/items-index.json','[]')\n\t\t}\n\n\t\tvar indexContents = await this.archive.readFile('/items-index.json')\n\t\tthis.index = JSON.parse(indexContents);\n\t\t\n\n\t}\n\n\tasync addNoteToIndex(note) {\n\t\t//update index\n\t\t//persist changes\n\t\tthis.index.push({\n\t\t\tlat: note.lat,\n\t\t\tlon: note.lon,\n\t\t\tid: note.id\n\t\t})\n\n\t\treturn this.archive.writeFile('/items-index.json', JSON.stringify(this.index))\n\t}\n\n\tasync addNote(item) {\n\t\tawait this.archive.writeFile('/items/'+item.id, JSON.stringify(item))\n\t    return addNoteToIndex(item)\n\n\t}\n\n\tasync updateNote(item) {\n\t\tawait this.archive.writeFile('/items/'+item.id, JSON.stringify(item))\n\t}\n\n\tasync monitorArea(from, to) {\n\t\tconsole.log('monitoring area', from, to)\n\t\t//Buscar todas las notas donde la posicion esté entre from y to\n\t\t//TODO: usar un algoritmo más rápido, box intersection\n\t\tthis.index.forEach(async(indexNote)=>{\n\t\t\tif(indexNote.lat >= from.x &&\n\t\t\t   indexNote.lat <= to.x &&\n\t\t\t   indexNote.lon >= from.y &&\n\t\t\t   indexNote.lon <= to.y) {\n\t\t\t\t//This note is inside the area\n\t\t\t\t//Read it and emit it\n\t\t\t\tthis.archive.readFile('/items/'+indexNote.id).then(content=>{\n\t\t\t\t\tthis.emit('item', JSON.parse(content));\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n}\nexport default DatDataProvider\t","/*\n  Componente LandMap encargado de mostrar las parcelas \n  y la navegación entre ellas\n\n  Las parcelas se representan en un objeto así:\n  ABC\n  DEF\n  GHI\n\n  Cuando hay movimientos se calcula lat,lon para cada\n  una de las posiciones del objeto.\n\n*/\n\nimport EventEmitter from 'events'\nimport {Point} from './utils'\n\n\nconst defaultOpts = {\n\tparcelLength: 200,\n\toffset: new Point(0,0)\n}\n\n//relations between parcels (useful to recalculate)\nconst REF_MAP ={\n\t\t\tA:{lat:-1, lon:-1},\n\t\t\tB:{lat: 0, lon:-1},\n\t\t\tC:{lat: 1, lon:-1},\n\t\t\tD:{lat:-1, lon: 0},\n\t\t\tE:{lat: 0 ,lon: 0},\n\t\t\tF:{lat: 1, lon: 0},\n\t\t\tG:{lat:-1, lon: 1},\n\t\t\tH:{lat: 0, lon: 1},\n\t\t\tI:{lat: 1, lon: 1}\n\t\t}\n\nclass LandMap extends EventEmitter {\n\n\tconstructor(opts = defaultOpts) {\n\t\tsuper();\n\t\tthis.parcelLength = opts.parcelLength;\n\t\t//Active parcels\n\t\tthis.parcelMap = {\n\t\t\tA:{lat:-1, lon:-1},\n\t\t\tB:{lat: 0, lon:-1},\n\t\t\tC:{lat: 1, lon:-1},\n\t\t\tD:{lat:-1, lon: 0},\n\t\t\tE:{lat: 0 ,lon: 0},\n\t\t\tF:{lat: 1, lon: 0},\n\t\t\tG:{lat:-1, lon: 1},\n\t\t\tH:{lat: 0, lon: 1},\n\t\t\tI:{lat: 1, lon: 1},\n\t\t}\n\t\tthis.offset = opts.offset\n\t}\n\n\tgetActiveParcels() {\n\t\treturn this.parcelMap;\n\t}\n\n\tmove({x=0,y=0}) {\n\t\tthis.offset = this.offset.add({x,y})\n\t\tthis.emit('offsetchanged', this.offset);\n\t\tthis.recalculatePosition(this.offset);\n\t}\n\n\t//Returns 2 points (top,left) and (bottom,right)\n\t//encompassing the total area (the 9 parcels)\n\tgetArea() {\n\t\tconst from = {\n\t\t\tx: this.parcelMap['A'].lat,\n\t\t\ty: this.parcelMap['A'].lon,\n\t\t}\n\n\t\tconst to = {\n\t\t\tx: this.parcelMap['I'].lat + 1,\n\t\t\ty: this.parcelMap['I'].lon + 1,\n\t\t}\n\t\treturn [new Point(from.x, from.y), new Point(to.x, to.y)]\n\t}\n\n\trecalculatePosition(offset) {\n\n\t\tconst nextLat = Math.floor(offset.x / (this.parcelLength - 1));\n\t\tconst nextLon = Math.floor(offset.y / (this.parcelLength - 1));\n\t\t//calculate the new map\n\t\tconst newParcelMap = {}\n\t\t//Use the reference map to calculate the lat, lon\n\t\t//based on the value of E (the center parcel)\n\t\tconst centerParcel = {\n\t\t\tlat:nextLat,\n\t\t\tlon:nextLon\n\t\t}\n\n\t\t//save the previous values of 'A' to detect if\n\t\t//the map changed\n\t\tconst prevStart = {...this.parcelMap['A']}\n\n\t\tObject.keys(this.parcelMap).forEach((id)=>{\n\t\t\tnewParcelMap[id] =  {\n\t\t\t\tlat: centerParcel.lat + REF_MAP[id].lat,\n\t\t\t\tlon: centerParcel.lon + REF_MAP[id].lon,\n\t\t\t}\n\t\t})\n\n\t\tconst newStart = {...newParcelMap['A']}\n\t\tif(prevStart.lat != newStart.lat || prevStart.lon != newStart.lon) {\n\t\t\t//the start parcel 'A' changed, so all the map changed\n\t\t\tthis.parcelMap = newParcelMap;\n\t\t\t//the area to monitor changed\n\t\t\tlet newArea = this.getArea()\n\t\t\tthis.emit('areachanged', newArea[0], newArea[1] );\n\t\t}\n\n\n\t}\n\n\n}\n\nexport {REF_MAP};\nexport default LandMap;","import LandMap,{REF_MAP} from './LandMap'\nimport * as domUtils from './domUtils'\nimport {Point} from './utils'\nimport noteRenderer from './NoteRenderer'\nimport EventEmitter from 'events'\n\n\n/**\n La clase mapview se encarga de manipular el DOM para\n mostrar las parcelas\n**/\n\n//TODO: format, change tabs to spaces\n\n\n//pixels moved when arrows are pressed\nconst KEYBOARD_STEP  = 400;\nconst defaultOpts = {\n\tcontainerElement: 'body',\n\titemRenderer: noteRenderer,\n\tparcelLength: 200,\n\tdataProvider: null,\n\n}\n\n//TODO: add base css here\n\nconst css = `\n\n\t.content-container {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\toverflow: hidden;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.item {\n\t    position: absolute;\n\t    top: 0;\n\t    left: 0;\n\t    transition: transform 0.5s;\n\t    word-wrap: break-word;\n\t}\n`\n\ndomUtils.injectCSS(css);\n\nexport default class MapView extends EventEmitter {\n\n\tconstructor(opts) {\n\t\tsuper()\n\t\topts = Object.assign({}, defaultOpts,  opts);\n\t\tthis.opts = opts; \n\t\tthis.offset = opts.offset || new Point(0,0)\n\t\tthis.dataProvider = opts.dataProvider;\n\t\tthis.container = typeof opts.containerElement === 'string' ? \n\t\t\tdocument.querySelector(opts.containerElement) :\n\t\t\topts.containerElement\n\n\t\tthis.map = new LandMap({\n\t\t\tparcelLength: opts.parcelLength,\n\t\t\toffset: this.offset\n\t\t})\n\t\tthis.initDOM()\n\t\tthis.attachEvents()\n\t\t//Start monitoring the initial map areachanged\n\t\tvar initialArea = this.map.getArea();\n\t\tthis.dataProvider.monitorArea(initialArea[0], initialArea[1])\n\n\t}\n\n\tinitDOM() {\n\t\t//Create contentContainer\n\t\tthis.contentContainer = this.createContentContainer();\n\n\t}\n\n\tcreateContentContainer() {\n\t\tvar contentContainer = document.createElement('div');\n\t\tcontentContainer.classList.add('content-container');\n\t\tthis.container.appendChild(contentContainer);\n\t\treturn contentContainer\n\t}\n\n\n\n\tattachEvents() {\n\t\tthis.monitorMapOffset();\n\t\tthis.connectToDataProvider();\n\t\tthis.addKeyboardEvents();\n\t\tthis.addMouseEvents()\n\t}\n\n\tmonitorMapOffset() {\n\n\t\tthis.map.on('offsetchanged', (offset)=>{\n\t\t\tconsole.log('offset changed', offset);\n\t\t\t//map was moved\n\t\t\tthis.offset = offset;\n\t\t\t//update transform attribute so they move\n\t\t\tthis.updateElementPositions(offset);\n\t\t})\n\n\t\t//when the area to monitor changes\n\t\t//receives the newArea [P1,P2] where\n\t\t//P1 is the top left point (lat,lon)\n\t\t//and P2 is the bottom right point\n\t\tthis.map.on('areachanged', (startPoint, endPoint)=>{\n\t\t\t//When current parcel changes (and their surroundings)\n\t\t\t//TODO: call monitorarea (dataprovider)\n\t\t\tconsole.log('parcel map changed')\n\t\t\tthis.dataProvider.monitorArea(startPoint, endPoint)\n\t\t})\n\t}\n\n\tupdateElementPositions(offset) {\n\t\t//upate dom elements transform attribute\n\t\tvar elems = Array.from(this.contentContainer.querySelectorAll('.item'))\n\t\telems.forEach((elem)=>{\n\t\t\tlet pos = this.getItemPosition(Number(elem.dataset.lat), Number(elem.dataset.lon), offset);\n\t\t\telem.style.transform = `translate(${pos.x}px,${pos.y}px)`\n\n\t\t})\n\t}\n\n\tconnectToDataProvider() {\n\t\tthis.dataProvider.on('item', (item)=>{\n\t\t\tconsole.log('item received,', item)\n\t\t\tlet itemElem = this.createItemElement(item);\n\t\t\titemElem.classList.add('item')\n\t\t\titemElem.dataset.lat = item.lat\n\t\t\titemElem.dataset.lon = item.lon\n\n\t\t\t//todo: add to a itemcontainr layer\n\t\t\tthis.contentContainer.appendChild(itemElem);\n\t\t\t//set position\n\t\t\tlet pos = this.getItemPosition(item.lat, item.lon, this.offset);\n\t\t\tconsole.log('item pos', pos)\n\t\t\titemElem.style.transform = `translate(${pos.x}px,${pos.y}px)`\n\n\t\t})\n\t}\n\n\tgetItemPosition(lat, lon, offset) {\n\t\t//calculate item the pixel position\n \t\t//TODO: don't access parcelMap directly\n\n\t\treturn {\n\t\t\tx: lat * this.opts.parcelLength + offset.x,\n\t\t\ty: lon * this.opts.parcelLength + offset.y\n\t\t}\n\t}\n\n\tcreateItemElement(item) {\n\t\t//todo delegate this to item renderer\n\t\tvar elem = document.createElement('div')\n\t\telem.innerHTML = this.opts.itemRenderer(item);\n\t\treturn elem;\n\t}\n\n\taddKeyboardEvents() {\n\t\tdocument.addEventListener('keyup', (ev)=>{\n\t\t\tconst allowed = ['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown']\n\t\t\tif(allowed.indexOf(ev.key) >= 0 ) {\n\t\t\t\t\tswitch(ev.key) {\n\t\t\t\t\tcase \"ArrowDown\":\n\t\t\t\t\t\tthis.map.move({y:-KEYBOARD_STEP});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"ArrowLeft\":\n\t\t\t\t\t\tthis.map.move({x:KEYBOARD_STEP});\n\t\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"ArrowRight\":\n\t\t\t\t\t\tthis.map.move({x:-KEYBOARD_STEP});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"ArrowUp\":\n\t\t\t\t\t\tthis.map.move({y:KEYBOARD_STEP});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\t\n\t\t\t}\n\t\t})\n\t}\n\n\taddMouseEvents() {\n\t\tthis.contentContainer.addEventListener('click', (ev)=>{\n\t\t\tthis.emit('content-area-clicked', ev)\n\t\t})\n\t}\n\n}\n\n","\n//Note renderer\nexport default function(item){\n\treturn `\n\t<div class=\"background-secondary border border-primary\" style=\"width: 8rem; height:10rem; padding: 1rem;\">\n\t   \t${item.text}\n\t</div>`\n}","import EventEmitter from 'events'\n\nclass TestDataProvider extends EventEmitter {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tmonitorArea(from, to) {\n\t\tfor (var i = 0; i < 5; i++) {\n\t\t\tfor(var j =0 ; j < 5 ; j++ ) {\n\t\t\t\tlet lat = Math.random() * i\n\t\t\t\tlet lon = Math.random() * j\n\t\t\t\tthis.emit('item', {\n\t\t\t\t\tid:Math.random()*100,\n\t\t\t\t\ttext:'Some text' + Math.random()*2000,\n\t\t\t\t\tlat:lat,\n\t\t\t\t\tlon:lon,\n\t\t\t\t})\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n}\nexport default TestDataProvider","export function injectCSS(css) {\n\tconst styleElem = document.createElement('style')\n\tstyleElem.setAttribute('type', 'text/css')\n\tstyleElem.textContent = css\n    document.querySelector('head').appendChild(styleElem)\n}\n","import MapView from './MapView';\nimport TestRandomDataProvider from './TestRandomDataProvider2';\nimport DatDataProvider from './DatDataProvider';\n\n//this should render the parcels\n\n//var provider = new DatDataProvider();\nvar provider = new TestRandomDataProvider()\nvar map = new MapView({\n\tdataProvider: provider,\n\tparcelLength: 500\n})\n\nmap.on('content-area-click', (ev) =>{\n\t//create note at point\n\tconsole.log('click')\n})\n","//immutable point structure\nexport class Point {\n\n\tconstructor(x=0, y=0) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\tadd({x,y}) {\n\t\treturn new Point(this.x+x, this.y+y)\n\t}\n}"],"sourceRoot":""}